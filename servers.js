var soralink={sora_included_links:"",sora_excluded_links:"",sora_base_url:""};soralink.rmProtocol=function(r){var n=r;return 0===r.indexOf("https://")&&(n=r.replace("https://","")),0===r.indexOf("http://")&&(n=r.replace("http://","")),0===r.indexOf("//")&&(n=r.replace("//","")),n},soralink.commaToArray=function(r){return r.replace(/\s+/g,"").split(",").filter(function(r){return null!=r&&""!=r})},soralink.shuffle=function(r){var n,t,e;for(e=r.length-1;e>0;e--)n=Math.floor(Math.random()*(e+1)),t=r[e],r[e]=r[n],r[n]=t;return r[0]},soralink.buildLink=function(r){return soralink.me()+"?r="+btoa(r)},soralink.in=function(r,n){return n.filter(function(n){return -1!==n.indexOf("*")?(RegExp(n=n.replace(".","\\.").replace("*",".*")),null!==r.match(n)):0===soralink.rmProtocol(r).trim().indexOf(n)}).length>=1},soralink.shouldWeDoThat=function(r){return!this.in(r,this.sora_excluded_links)&&!!(this.sora_included_links.length<1||this.in(r,this.sora_included_links))},soralink.me=function(){if(this.sora_base_url.length)return this.shuffle(this.sora_base_url);for(var r=document.getElementsByTagName("script"),n=0;n<r.length;n++)if(/assets\/js\/soralink\.js/i.test(r[n].getAttribute("src"))){var t=r[n].getAttribute("src");return t.split("wp-content/")[0]}},soralink.run=function(){this.sora_included_links=this.commaToArray("undefined"!=typeof sora_included_links?sora_included_links:""),this.sora_excluded_links=this.commaToArray(window.location.hostname+","+("undefined"!=typeof sora_excluded_links?sora_excluded_links:"")),this.sora_base_url=this.commaToArray("string"==typeof sora_base_url?sora_base_url:""),document.querySelectorAll("a[href]").forEach(function(r){var n=r.href;!1!=soralink.shouldWeDoThat(n)&&(r.href=soralink.buildLink(n))})};
